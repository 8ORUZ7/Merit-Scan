<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Register</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
<a href="#main" class="skip-link">Skip to content</a>

<header class="topbar" data-elevate>
  <div class="container topbar-inner">
    <a class="brand" href="index.html">
      <div class="brand-logo-wrap">
        <img class="brand-logo" src="https://i.imgur.com/4Z5b1aH.png" alt="Logo">
      </div>
      <span class="brand-name">Merit Scan</span>
    </a>
    <nav class="topnav" aria-label="Primary">
      <button class="nav-toggle-btn" id="mobileNavBtn" aria-label="Menu" aria-expanded="false" aria-controls="mobileDrawer">
        <span class="bar"></span><span class="bar"></span><span class="bar"></span>
      </button>
      <ul class="topnav-list" id="mainNav">
        <li><a class="topnav-link" href="index.html">Home</a></li>
        <li><a class="topnav-link active" href="register.html">Register</a></li>
        <li><a class="topnav-link" href="login.html">Login</a></li>
      </ul>
    </nav>
  </div>
  <div class="mobile-drawer" id="mobileDrawer" hidden>
    <nav aria-label="Mobile navigation">
      <a class="mobile-link" href="index.html" data-close>Home</a>
      <a class="mobile-link active" href="register.html" data-close>Register</a>
      <a class="mobile-link" href="login.html" data-close>Login</a>
    </nav>
  </div>
</header>

<main id="main" class="auth-main">
  <!-- Compact hero WITHOUT right-side artwork -->
  <section class="hero hero-compact">
    <div class="container">
      <h1 class="hero-title reveal-up" style="margin-bottom:10px;">Create Your Account</h1>
      <p class="hero-subtitle reveal-up delay-1" style="max-width:680px;">Start managing attendance & merits with a streamlined toolkit.</p>
    </div>
  </section>

  <section class="container auth-wrap">
    <div class="card form-card elevate reveal-up">
      <h2 class="form-title">Register</h2>
      <form class="form" id="registerForm" novalidate>
        <div class="field">
          <label for="name">Name</label>
          <input class="input" id="name" name="name" type="text" autocomplete="name" required>
          <p class="field-msg" data-msg-for="name"></p>
        </div>

        <div class="field">
          <label for="profession">Profession</label>
          <div class="select-wrap">
            <select class="input" id="profession" name="profession" required>
              <option value="">Select one</option>
              <option value="teacher">Teacher</option>
              <option value="professor">Professor</option>
              <option value="adviser">Adviser</option>
            </select>
          </div>
          <p class="field-msg" data-msg-for="profession"></p>
        </div>

        <div class="field">
          <label for="email">Email</label>
          <input class="input" id="email" name="email" type="email" autocomplete="email" required>
          <p class="field-msg" data-msg-for="email"></p>
        </div>

        <div class="field password-field">
          <label for="password">Password</label>
          <div class="password-wrap">
            <input class="input" id="password" name="password" type="password"
                   required
                   pattern="^(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$#]).{8,}$"
                   aria-describedby="pwHelp pwStrength"
                   autocomplete="new-password">
            <button type="button" class="pwd-toggle" aria-label="Show password" data-visible="false">üëÅ</button>
          </div>
          <div id="pwHelp" class="help-text">
            Min 8 chars, 1 uppercase, 1 number, 1 special (!@#$#)
          </div>
          <div id="pwStrength" class="pw-meter" aria-live="polite">
            <span class="pw-bar"></span>
            <span class="pw-label">Strength: <b>‚Äî</b></span>
          </div>
          <p class="field-msg" data-msg-for="password"></p>
        </div>

        <fieldset class="levels fieldset">
          <legend>Levels</legend>
          <label><input type="radio" name="levels" value="grade" required> Grade School</label>
          <label><input type="radio" name="levels" value="high"> High School</label>
          <label><input type="radio" name="levels" value="college"> College</label>
        </fieldset>

        <div class="field">
          <label for="school_campus">School / Campus</label>
          <input class="input" id="school_campus" name="school_campus" type="text" autocomplete="organization">
        </div>

        <div class="field file-field">
          <label for="upload_idcard">Upload Valid ID</label>
          <div class="file-box">
            <input class="file-input" id="upload_idcard" name="upload_idcard" type="file" accept="image/*" required>
            <span class="file-label" data-file-label>Choose file...</span>
            <button type="button" class="btn btn-ghost btn-xs" id="clearFileBtn" hidden>Clear</button>
          </div>
          <div class="preview" id="filePreview" hidden></div>
          <p class="field-msg" data-msg-for="upload_idcard"></p>
        </div>

        <button type="submit" class="btn btn-primary full btn-lg" id="registerBtn">
          <span class="btn-label">Create Account</span>
          <span class="btn-spinner" aria-hidden="true"></span>
        </button>
      </form>
      <p class="form-note">Already have an account? <a href="login.html" class="link">Sign In</a>.</p>
    </div>
  </section>
</main>

<footer class="site-footer">
  <div class="container footer-grid">
    <div>
      <h3 class="footer-heading">Merit Scan</h3>
      <p class="footer-text small">Unified Attendance & Merit Platform</p>
    </div>
    <div>
      <h3 class="footer-heading">Navigation</h3>
      <ul class="footer-list">
        <li><a class="footer-link" href="index.html">Home</a></li>
        <li><a class="footer-link" href="login.html">Login</a></li>
      </ul>
    </div>
  </div>
  <p class="copyright">¬© 2025 Merit Scan</p>
</footer>

<div id="liveRegion" class="visually-hidden" aria-live="polite"></div>

<script>
/* Mobile Drawer */
(function(){
  const btn=document.getElementById('mobileNavBtn');
  const drawer=document.getElementById('mobileDrawer');
  if(!btn||!drawer) return;
  function open(){drawer.hidden=false;btn.setAttribute('aria-expanded','true');document.body.classList.add('no-scroll');}
  function close(){drawer.hidden=true;btn.setAttribute('aria-expanded','false');document.body.classList.remove('no-scroll');}
  btn.addEventListener('click',()=>drawer.hidden?open():close());
  drawer.addEventListener('click',e=>{ if(e.target.matches('[data-close]')||e.target.closest('a.mobile-link')) close(); });
  addEventListener('resize',()=>{ if(innerWidth>900) close(); });
  if(innerWidth>900) close();
})();

/* Reveal */
(function(){
  const obs=new IntersectionObserver(es=>es.forEach(e=>{
    if(e.isIntersecting){e.target.classList.add('in');obs.unobserve(e.target);}
  }),{threshold:.2});
  document.querySelectorAll('.reveal-up').forEach(el=>obs.observe(el));
})();

/* Register Form */
(function(){
  const form=document.getElementById('registerForm');
  if(!form) return;
  const pwd=form.querySelector('#password');
  const toggle=form.querySelector('.pwd-toggle');
  const bar=form.querySelector('.pw-bar');
  const label=form.querySelector('.pw-label b');
  toggle.addEventListener('click',()=>{
    const vis=toggle.getAttribute('data-visible')==='true';
    pwd.type=vis?'password':'text';
    toggle.setAttribute('data-visible',!vis);
    toggle.textContent=vis?'üëÅ':'üôà';
  });
  function strength(v){
    let s=0;
    if(/[A-Z]/.test(v)) s++;
    if(/[0-9]/.test(v)) s++;
    if(/[!@#$#]/.test(v)) s++;
    if(v.length>=8) s++;
    return s;
  }
  pwd.addEventListener('input',()=>{
    const v=pwd.value;
    const s=strength(v);
    bar.style.width=['0%','25%','50%','75%','100%'][s];
    bar.dataset.level=s;
    label.textContent=!v?'‚Äî':['Weak','Weak','Fair','Good','Strong'][s];
  });

  const fileInput=form.querySelector('#upload_idcard');
  const fileLabel=form.querySelector('[data-file-label]');
  const clearBtn=document.getElementById('clearFileBtn');
  const preview=document.getElementById('filePreview');
  fileInput.addEventListener('change',()=>{
    if(fileInput.files && fileInput.files[0]){
      const f=fileInput.files[0];
      fileLabel.textContent=f.name;
      clearBtn.hidden=false;
      if(f.type.startsWith('image/')){
        const fr=new FileReader();
        fr.onload=e=>{
          preview.innerHTML='<img src="'+e.target.result+'" alt="ID preview">';
          preview.hidden=false;
        };
        fr.readAsDataURL(f);
      } else preview.hidden=true;
    } else {
      fileLabel.textContent='Choose file...';
      clearBtn.hidden=true;
      preview.hidden=true;
    }
  });
  clearBtn.addEventListener('click',()=>{
    fileInput.value='';
    fileInput.dispatchEvent(new Event('change'));
  });

  function showError(el,msg){
    const p=form.querySelector('[data-msg-for="'+el.id+'"]');
    if(p) p.textContent=msg||'';
    el.classList.toggle('is-invalid', !!msg);
  }
  form.addEventListener('submit',e=>{
    let invalid=false;
    ['name','profession','email','password','upload_idcard'].forEach(id=>{
      const el=form.querySelector('#'+id);
      if(el && !el.checkValidity()){ showError(el, el.validationMessage); invalid=true; }
      else showError(el,'');
    });
    if(invalid){ e.preventDefault(); return; }
    e.preventDefault();
    const btn=document.getElementById('registerBtn');
    btn.classList.add('loading'); btn.disabled=true;
    setTimeout(()=>{
      btn.classList.remove('loading'); btn.disabled=false;
      alert('Registered (demo)!');
      form.reset();
      fileInput.dispatchEvent(new Event('change'));
      pwd.dispatchEvent(new Event('input'));
    },1200);
  });
})();
</script>
</body>
</html>